<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   Event RSVP Phase 1
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
   body {
            font-family: 'Roboto', sans-serif;
            background-color: #001900;
            color: #fff;
        }
  </style>
 </head>
 <body class="p-4">
  <div class="max-w-4xl mx-auto">
   <div class="flex flex-col md:flex-row">
    <div class="md:w-1/3">
     <img alt="Event poster with text 'PHASE - 1 approvals have ROLLED OUT!!'" class="w-full mb-4" height="300" src="https://placehold.co/300x300?text=Event+Poster" width="300"/>
     <div class="bg-black p-4 rounded-lg">
      <h2 class="text-lg mb-2">
       Hosted By
      </h2>
      <ul class="space-y-2">
       <li class="flex items-center">
        <img alt="Host avatar" class="w-8 h-8 rounded-full mr-2" height="30" src="https://placehold.co/30x30?text=Avatar" width="30"/>
        Event
       </li>
       <li class="flex items-center">
        <img alt="Host avatar" class="w-8 h-8 rounded-full mr-2" height="30" src="https://placehold.co/30x30?text=Avatar" width="30"/>
        Sumit
       </li>
       <li class="flex items-center">
        <img alt="Host avatar" class="w-8 h-8 rounded-full mr-2" height="30" src="https://placehold.co/30x30?text=Avatar" width="30"/>
       Sahil
       </li>
      </ul>
      <div class="mt-4">
       <p class="text-sm">
        126 Going
       </p>
       <div class="flex -space-x-2">
        <img alt="Attendee avatar" class="w-8 h-8 rounded-full border-2 border-black" height="30" src="https://placehold.co/30x30?text=Avatar" width="30"/>
        <img alt="Attendee avatar" class="w-8 h-8 rounded-full border-2 border-black" height="30" src="https://placehold.co/30x30?text=Avatar" width="30"/>
        <img alt="Attendee avatar" class="w-8 h-8 rounded-full border-2 border-black" height="30" src="https://placehold.co/30x30?text=Avatar" width="30"/>
        <img alt="Attendee avatar" class="w-8 h-8 rounded-full border-2 border-black" height="30" src="https://placehold.co/30x30?text=Avatar" width="30"/>
        <img alt="Attendee avatar" class="w-8 h-8 rounded-full border-2 border-black" height="30" src="https://placehold.co/30x30?text=Avatar" width="30"/>
       </div>
      </div>
      <div class="mt-4">
       <p class="text-sm underline cursor-pointer">
        Contact the Host
       </p>
       <p class="text-sm underline cursor-pointer">
        Report Event
       </p>
      </div>
     </div>
    </div>
    <div class="md:w-2/3 md:pl-4">
     <h1 class="text-3xl mb-4">
      Event RSVP 
     </h1>
     <div class="flex items-center mb-4">
      <div class="bg-gray-800 text-white p-2 rounded-lg mr-4">
       <p class="text-center">
        MAR
       </p>
       <p class="text-center text-2xl">
        29
       </p>
      </div>
      <div>
       <p>
        Saturday 29 March
       </p>
       <p>
        8:00 am - 30 Mar, 5:00 pm
       </p>
       <p>
        Kalyani Government Engineering College
       </p>
       <p>
        Kalyani, West Bengal
       </p>
      </div>
     </div>
     <div class="bg-gray-800 p-4 rounded-lg mb-4">
      <div class="flex items-center justify-between">
       <div class="flex items-center">
        <i class="fas fa-smile text-2xl mr-2">
        </i>
        <p class="text-lg">
         You're In
        </p>
       </div>
       <div class="flex items-center">
        <button class="bg-green-500 text-black px-2 py-1 rounded-lg mr-2">
         My Ticket
        </button>
        <button class="bg-gray-700 text-white px-2 py-1 rounded-lg">
         Invite a Friend
        </button>
       </div>
      </div>
      <p class="mt-2 text-sm">
       No longer able to attend? Notify the host by
       <span class="underline cursor-pointer">
        cancelling your registration
       </span>
       .
      </p>
      <p class="mt-2 text-sm">
       Get Ready for the Event
      </p>
      <p class="text-sm">
       Profile Complete • Reminder: SMS &amp; Email
      </p>
     </div>
     <h2 class="text-2xl mb-2">
      About Event
     </h2>
     <p class="text-sm mb-2">
      Hey everyone! The countdown to Event has officially begun, and we're kicking things off with Event RSVP Phase 1! It's time to confirm your spot and let us know you're ready to join the excitement.
      <strong>
       Each team member needs to fill out this quick form to lock in their participation—so don't miss out!
      </strong>
     </p>
     <p class="text-sm mb-2">
      Event is all about fun, teamwork, and unforgettable memories, and we can't wait to see you there!
     </p>
     <p class="text-sm mb-2">
      Let's get this party started—confirm your attendance now and join the Event buzz!
     </p>
    </div>
   </div>
  </div>
 </body>
</html>
<script>
    // Example status values: 'confirmed', 'pending', 'cancelled'
    let eventStatus = 'pending'; // Change this based on actual status
  
    function getStatusText(status) {
      switch (status) {
        case 'confirmed':
          return { text: "You're In", color: 'text-green-400', icon: 'fa-smile' };
        case 'pending':
          return { text: "Pending Approval", color: 'text-yellow-400', icon: 'fa-hourglass-half' };
        case 'cancelled':
          return { text: "Cancelled", color: 'text-red-400', icon: 'fa-times-circle' };
        default:
          return { text: "Unknown Status", color: 'text-gray-400', icon: 'fa-question-circle' };
      }
    }
  
    document.addEventListener('DOMContentLoaded', function () {
      let statusInfo = getStatusText(eventStatus);
      document.getElementById('statusText').innerText = statusInfo.text;
      document.getElementById('statusIcon').classList.add(statusInfo.icon, statusInfo.color);
    });
  </script>
  
  <div class="bg-gray-800 p-4 rounded-lg mb-4">
    <div class="flex items-center justify-between">
      <div class="flex items-center">
        <i id="statusIcon" class="text-2xl mr-2"></i>
        <p id="statusText" class="text-lg"></p>
      </div>
      <div class="flex items-center">
        <button class="bg-green-500 text-black px-2 py-1 rounded-lg mr-2">
          My Ticket
        </button>
        <button class="bg-gray-700 text-white px-2 py-1 rounded-lg">
          Invite a Friend
        </button>
      </div>
    </div>
    <p class="mt-2 text-sm">
      No longer able to attend? Notify the host by
      <span class="underline cursor-pointer">
        cancelling your registration
      </span>.
    </p>
    <p class="mt-2 text-sm">
      Get Ready for the Event
    </p>
    <p class="text-sm">
      Profile Complete • Reminder: SMS & Email
    </p>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', async function () {
      // Extract bookingId from URL query parameters
      const urlParams = new URLSearchParams(window.location.search);
      const bookingId = urlParams.get('bookingId');
      
      if (!bookingId) {
        console.error("Booking ID not found in URL");
        updateStatusUI("unknown");
        return;
      }
      console.log("Booking ID:", bookingId);
      const apiUrl = `http://localhost:3002/api/v1/bookings/${bookingId}`;
  
      try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        console.log(data.data);
        if (data.success && data.data) {
          let eventStatus = data.data.status;
          updateStatusUI(eventStatus);
        } else {
          console.error("Error fetching booking data:", data.message);
          updateStatusUI("unknown");
        }
      } catch (error) {
        console.error("Failed to fetch booking status:", error);
        updateStatusUI("unknown");
      }
    });
  
    function getStatusText(status) {
      switch (status) {
        case 'InProcess':
          return { text: "In Process", color: 'text-blue-400', icon: 'fa-spinner' };
        case 'Booked':
          return { text: "You're Booked", color: 'text-green-400', icon: 'fa-check-circle' };
        case 'Cancelled':
          return { text: "Cancelled", color: 'text-red-400', icon: 'fa-times-circle' };
        default:
          return { text: "Unknown Status", color: 'text-gray-400', icon: 'fa-question-circle' };
      }
    }
  
    function updateStatusUI(status) {
      let statusInfo = getStatusText(status);
      let statusTextEl = document.getElementById('statusText');
      let statusIconEl = document.getElementById('statusIcon');
  
      if (statusTextEl && statusIconEl) {
        statusTextEl.innerText = statusInfo.text;
        statusIconEl.className = `text-2xl mr-2 fas ${statusInfo.icon} ${statusInfo.color}`;
      }
    }
  </script>
  